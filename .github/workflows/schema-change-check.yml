# ------------DO-NOT-MODIFY-THIS-FILE------------
# This file was automatically generated by github-actions-workflow-ts.
# Instead, modify workflows/schema-change-check.wac.ts
# ------------DO-NOT-MODIFY-THIS-FILE------------

name: Schema Change Check
'on':
  push:
    branches:
      - '**'
  schedule:
    - cron: 0 0 * * *
jobs:
  SchemaChangeCheck:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install Node
        uses: actions/setup-node@v4
        with:
          node-version: 18
      - name: Install tsx
        run: npm install -g tsx
      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8
      - name: Install Dependencies
        run: pnpm install --no-frozen-lockfile
      - name: Generate Workflow Types
        run: pnpm generate-workflow-types
      - name: Get git diff
        run: git diff -- ':!pnpm-lock.yaml'
      - name: Fail if git diff is not empty
        run: |-
          if test -z "$(git diff --name-only -- ':!pnpm-lock.yaml')"; then
            echo "No file changes detected."
            exit 0
          else
            echo "File changes detected."
            exit 1
          fi
