---
sidebar_position: 4
---

# Configuration

Customize how github-actions-workflow-ts generates YAML files using a configuration file.

## Config File

Create a `wac.config.json` file in your project root:

```json
{
  "refs": false,
  "headerText": [
    "# ----DO-NOT-MODIFY-THIS-FILE----",
    "# This file was automatically generated by github-actions-workflow-ts.",
    "# Instead, modify `<source-file-path>`",
    "# ----DO-NOT-MODIFY-THIS-FILE----"
  ],
  "dumpOptions": {},
  "diagnostics": {
    "rules": {}
  }
}
```

## Options

### refs

If `true`, convert duplicate objects into YAML references (anchors and aliases).

| Type | Default |
|------|---------|
| `boolean` | `false` |

```json
{
  "refs": true
}
```

### headerText

Customize the header comment in generated YAML files. Use `<source-file-path>` as a placeholder for the source file path.

| Type | Default |
|------|---------|
| `string[]` | See default header |

```json
{
  "headerText": [
    "# Auto-generated from <source-file-path>",
    "# Do not edit directly"
  ]
}
```

### dumpOptions

Options passed to [js-yaml's dump function](https://github.com/nodeca/js-yaml#dump-object---options-). Useful for controlling YAML formatting.

| Type | Default |
|------|---------|
| `object` | `{}` |

```json
{
  "dumpOptions": {
    "lineWidth": 120,
    "noRefs": true
  }
}
```

### outputPaths

Configure custom output directories for generated workflow files. Useful for monorepos where workflows need to be placed in different locations.

| Type | Default |
|------|---------|
| `object` | `undefined` |

```json
{
  "outputPaths": {
    "workflows": {
      "default": ".github/workflows",
      "overrides": [
        {
          "match": "app-a-deploy.wac.ts",
          "path": "packages/app-a/.github/workflows"
        },
        {
          "match": "*-release.wac.ts",
          "path": "packages/releases/.github/workflows"
        },
        {
          "match": "packages/app-b/**/*.wac.ts",
          "path": "packages/app-b/.github/workflows"
        }
      ]
    }
  }
}
```

#### workflows.default

The default output directory for all workflow files. If not specified, defaults to `.github/workflows`.

#### workflows.overrides

An array of override rules. Each rule has:
- `match` - Pattern to match against the source `.wac.ts` file. Supports:
  - Filename patterns: `deploy.wac.ts`, `*-release.wac.ts`
  - Full path patterns: `packages/app-a/**/*.wac.ts`, `src/workflows/*.wac.ts`
- `path` - Output directory for matching workflows

Patterns are matched against both the full relative path and the filename, so `deploy.wac.ts` will match files at any depth.

Overrides are checked in order; the first matching pattern wins.

#### Path Resolution Priority

Output paths are resolved in this order (highest priority first):
1. Workflow-level `outputPath` option (set in the Workflow constructor)
2. Config `outputPaths.workflows.overrides` (first matching pattern)
3. Config `outputPaths.workflows.default`
4. Default `.github/workflows`

### diagnostics

Configure diagnostic warnings emitted during build when using `@github-actions-workflow-ts/actions`.

| Type | Default |
|------|---------|
| `object` | `undefined` |

#### Diagnostic Rules

```json
{
  "diagnostics": {
    "rules": {
      "action-version-unverifiable": "off",
      "action-version-semver-violation": {
        "severity": "error",
        "exclude": ["actions/checkout@*"]
      }
    }
  }
}
```

#### Severity Levels

- `"off"` - Suppress the diagnostic entirely
- `"warn"` - Emit as a warning (default)
- `"error"` - Upgrade to an error (fails the build)

#### Exclude Patterns

Suppress diagnostics for specific actions using patterns:

- `"actions/checkout@v3"` - Exact match
- `"actions/checkout@*"` - Any version of actions/checkout
- `"actions/*"` - All actions from the `actions` org

## Example Configuration

A complete example with all options:

```json
{
  "refs": false,
  "headerText": [
    "# ============================================",
    "# AUTO-GENERATED FILE - DO NOT EDIT DIRECTLY",
    "# Source: <source-file-path>",
    "# ============================================"
  ],
  "dumpOptions": {
    "lineWidth": 100
  },
  "outputPaths": {
    "workflows": {
      "default": ".github/workflows",
      "overrides": [
        {
          "match": "app-*-deploy.wac.ts",
          "path": "packages/deployments/.github/workflows"
        }
      ]
    }
  },
  "diagnostics": {
    "rules": {
      "action-version-unverifiable": "off",
      "action-version-semver-violation": {
        "severity": "warn",
        "exclude": [
          "actions/checkout@v3",
          "docker/*"
        ]
      }
    }
  }
}
```
